void 0===window.requestAnimationFrame&&(window.requestAnimationFrame=function(n){return window.setTimeout(n,16)},window.cancelAnimationFrame=function(n){return window.clearTimeout(n)});var clock=function(){var t,n,e,o,i,c,r,a,u,l={},k=25,s=5,d="#1D3043",m="#C04B2E",f=!1,w=new Audio,g=!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),b=60*k,T=b,p=!1,x=!1,h="work";function v(){return p||!x}function A(){r=Date.now(),0===T?(C(),"work"===h?(h="break",e.text("Break"),T=b=60*s):(h="work",e.text("Session"),T=b=60*k)):2===T&&w.play(),1e3<=r-a&&(a=r,T-=1,n.text(y(T))),B(),u=window.requestAnimationFrame(A)}function B(){var n=(b-(r-c)/1e3)/b*100;t.css("background","linear-gradient("+d+" "+n+"%, "+m+" "+n+"%)")}function y(n){var t=Math.floor(n/60),e=n%60;return t=t.toString(),e=e.toString(),t.length<2&&(t="0"+t),e.length<2&&(e="0"+e),t+":"+e}function C(){c=r=a=Date.now()}function F(){i.text(s),"break"===h&&(C(),p=!1,T=b=60*s,B(),n.text(y(T)))}function S(){o.text(k),"work"===h&&(C(),p=!1,T=b=60*k,B(),n.text(y(T)))}return l.init=function(){t=$(arguments[0]),n=$(arguments[1]),e=$(arguments[2]),i=$(arguments[3]),o=$(arguments[4]),n.text(y(T)),e.text("Session"),o.text(k),i.text(s),d=t.css("background-color")},l.start=function(){p?(r=Date.now(),c+=r-a,a=r):(f||(g&&w.play(),w.src="public/audio/6de6332f09e1f5c02156eabd1272bfe1_Alarm01.ogg",f=!0),C()),x=!(p=!1),A()},l.stop=function(){x=p=!1,C(),window.cancelAnimationFrame(u)},l.pause=function(){x&&!p&&(x=!(p=!0),a=Date.now(),window.cancelAnimationFrame(u))},l.reset=function(){this.stop(),T=b=60*k,C(),h="work",n.text(y(T)),e.text("Session"),B()},l.addWorkTime=function(){k<60&&v()&&(k+=1,S())},l.minusWorkTime=function(){1<k&&v()&&(k-=1,S())},l.addBreakTime=function(){s<60&&v()&&(s+=1,F())},l.minusBreakTime=function(){0<s&&v()&&(s-=1,F())},l.toggleTimer=function(){x?this.pause():this.start()},l}();function buttonClick(n){var t=$("#"+n);t.toggleClass("clicked"),window.setTimeout(function(){t.toggleClass("clicked")},250)}$(document).ready(function(){clock.init("#clock","#clock #time","#clock #period","#break-counter-display","#work-counter-display"),$(document).on("visibilitychange",function(n){this.hidden&&clock.pause()}),$("#clock").on("click",function(n){clock.toggleTimer()}),$(".minus").on("click",function(n){var t=n.currentTarget.parentElement.id;"break-control"===t?clock.minusBreakTime():"work-control"===t&&clock.minusWorkTime(),buttonClick(n.currentTarget.id)}),$(".plus").on("click",function(n){var t=n.currentTarget.parentElement.id;"break-control"===t?clock.addBreakTime():"work-control"===t&&clock.addWorkTime(),buttonClick(n.currentTarget.id)}),$("#reset").on("click",function(n){clock.reset(),buttonClick("reset")})});