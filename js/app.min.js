var clock=function(){var t,n,o,e,c,i,r,a,l,u={},k=1,s=1,d="#1D3043",f="#C04B2E",m=!1,g="audio/6de6332f09e1f5c02156eabd1272bfe1_Alarm01.ogg",w=60*k,T=w,b=!1,x=!1,p="work",v=new Audio;function C(){return b||!x}function B(){r=Date.now(),0===T?(D(),"work"===p?(p="break",o.text("Break"),T=w=60*s):(p="work",o.text("Session"),T=w=60*k)):2===T&&v.play(),1e3<=r-a&&(a=r,T-=1,n.text(A(T))),y(),l=window.requestAnimationFrame(B)}function y(){var n=100/w*(w-(r-i)/1e3);t.css("background","linear-gradient("+d+" "+n+"%, "+f+" "+n+"%)")}function A(n){var t=Math.floor(n/60),o=n%60;return t=t.toString(),o=o.toString(),t.length<2&&(t="0"+t),o.length<2&&(o="0"+o),t+":"+o}function D(){i=r=a=Date.now()}function S(){c.text(s),"break"===p&&(D(),b=!1,T=w=60*s,y(),n.text(A(T)))}function W(){e.text(k),"work"===p&&(D(),b=!1,T=w=60*k,y(),n.text(A(T)))}return u.init=function(){t=$(arguments[0]),n=$(arguments[1]),o=$(arguments[2]),c=$(arguments[3]),e=$(arguments[4]),n.text(A(T)),o.text("Session"),e.text(k),c.text(s),d=t.css("background-color")},u.addWorkTime=function(){k<60&&C()&&(k+=1,W())},u.minusWorkTime=function(){1<k&&C()&&(k-=1,W())},u.addBreakTime=function(){s<60&&C()&&(s+=1,S())},u.minusBreakTime=function(){0<s&&C()&&(s-=1,S())},u.toggleTimer=function(){x?(x=!(b=!0),a=Date.now(),window.cancelAnimationFrame(l)):function(){b?(console.log("unpaused clock"),r=Date.now(),i+=r-a,a=r):(console.log("started clock"),m||(v.play(),v.src=g,m=!0),D());b=!1,x=!0,B()}()},u.reset=function(){x=b=!1,D(),window.cancelAnimationFrame(l),T=w=60*k,D(),p="work",n.text(A(T)),o.text("Session"),y()},u}();function buttonClick(n){var t=$("#"+n);t.toggleClass("clicked"),window.setTimeout(function(){t.toggleClass("clicked")},250)}$("document").ready(function(){clock.init("#clock","#clock #time","#clock #period","#break-counter-display","#work-counter-display"),$("#clock").on("click",function(n){clock.toggleTimer()}),$(".minus").on("click",function(n){var t=n.currentTarget.parentElement.id;"break-control"===t?clock.minusBreakTime():"work-control"===t&&clock.minusWorkTime(),buttonClick(n.currentTarget.id)}),$(".plus").on("click",function(n){var t=n.currentTarget.parentElement.id;"break-control"===t?clock.addBreakTime():"work-control"===t&&clock.addWorkTime(),buttonClick(n.currentTarget.id)}),$("#reset").on("click",function(n){clock.reset(),buttonClick("reset")})});